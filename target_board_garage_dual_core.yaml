# EPIC Configuration for Dual-Core ARM Target Board
# Aggressively optimized for dual-core parallel processing

# Topic parameters - same as simulation
odometry_topic: /quad_0/lidar_slam/odom
cloud_topic: /quad0_pcl_render_node/cloud

# TSP solver configuration
exploration/tsp_dir: /home/root/catkin_ws/src/EPIC/src/global_planner/utils/lkh_tsp_solver/resource

# Global planning weights
global_planning/w_vdir: 1.2
global_planning/w_yawdir: 0.0
global_planning/w_firstnode: 0.2

# Visualization - disabled for performance on ARM
view_graph: false
FrontierManager/view_cluster: false
FrontierManager/view_frt: false

# Graph parameters - optimized for dual-core processing (PERFORMANCE OPTIMIZED)
bubble_topo/min_x: 1.2                    # Increased for faster processing  
bubble_topo/min_y: 1.2                    
bubble_topo/min_z: 0.6                    
bubble_topo/bubble_min_radius: 1.1        # Larger bubbles for simpler graph
bubble_topo/init_region_size_x: 4.0       # Larger initial region
bubble_topo/init_region_size_y: 4.0       
bubble_topo/init_region_size_z: 3.5       
bubble_topo/cube_discrete_size: 0.8       # INCREASED: Coarser for faster skeleton
bubble_topo/odom_node_distance: 7.0       # INCREASED: Fewer nodes for speed
bubble_astar/safe_distance: 1.0           
bubble_astar/allocate_num: 3000           # Further reduced allocation

# Map parameters - FIXED for better frontier detection
max_update_region_num: 25000              # INCREASED: More map updates for frontier detection
frontier/candidate_dphi: 0.4              # Fewer candidates for faster processing
frontier/candidate_znum: 2                # INCREASED: Multi z-level for better detection

# LiDAR perception - BALANCED for frontier detection + performance
lidar_perception/fov_up: 30.0             # INCREASED: More FOV for better frontier detection
lidar_perception/fov_down: -10.0          # INCREASED: More downward scanning
lidar_perception/lidar_pitch: 30.0        # Keep reduced pitch
lidar_perception/fov_viewpoint_up: 35.0   # Reduced for performance
lidar_perception/fov_viewpoint_down: -8.0 # Reduced for performance
lidar_perception/max_ray_length: 10       # Significantly reduced for faster processing

# Parallel processing - increased timeouts for ARM stability
parallel_astar/update_connection_timeout: 0.010  # Increased for stability
parallel_astar/insert_node_timeout: 0.010       # Increased for stability

# Frontier management - optimized for less computation
FrontierManager/cell_size: 0.8            # Increased for faster processing
FrontierManager/noise_cell_range: 1
FrontierManager/good_observation_direction_score: 0.6  # Reduced for faster processing
FrontierManager/good_observation_force_trust_length: 3.0  # Reduced for speed
FrontierManager/good_observation_trust_length: 8.0     # Reduced for speed
FrontierManager/update_length: 8.0        # Reduced for faster updates
FrontierManager/cluster_max_size: 5.0     # Reduced for faster clustering
FrontierManager/cluster_min_size: 1.0     # Reduced for faster clustering
FrontierManager/cluster_min_radius: 0.5   # Reduced for faster search
FrontierManager/cluster_direction_radius: 0.3   # Increased for more lenient clustering
FrontierManager/cluster_minmum_point_num: 2     # Reduced for faster clustering

# Viewpoint sampling - dual-core optimized
ViewpointManager/sample_pillar_min_height: 1.0   # Standard height
ViewpointManager/sample_pillar_max_height: 2.5   # Reduced height range
ViewpointManager/sample_pillar_height_layer_num: 1  # Single layer for dual-core
ViewpointManager/sample_pillar_min_radius: 2.5   
ViewpointManager/sample_pillar_max_radius: 2.8   # REDUCED: Tighter radius range
ViewpointManager/sample_pillar_radius_layer_num: 1  # Single radius layer
ViewpointManager/sample_pillar_circle_sample_num: 3  # REDUCED: Fewer samples
ViewpointManager/local_tsp_size: 4        # REDUCED: Smaller TSP for speed

# Exploration area
box_num: 1
box_0/down: [-10.0, -6.0, -0.2]
box_0/up: [182.0, 150.2, 3.8]
dead_area_num: 0

# Trajectory parameters - dual-core optimized
max_traj_len: 4.0                    # Shorter trajectories for faster planning
DilateRadiusSoft: 0.8                # Slightly larger for safety
DilateRadiusHard: 0.7                
MaxCorridorSize: 2.5                 # Smaller corridors for dual-core
MaxVelMag: 1.8                       # Reduced velocity for stability
maxBdrMag: 5000.0                    # Reduced boundary magnitude
MaxTiltAngle: 0.3                    # More conservative tilt angle
MinThrust: 15.0
MaxThrust: 18.0                      # Reduced max thrust
VehicleMass: 1.9
GravAcc: 9.8
HorizDrag: 0.70
VertDrag: 0.80
ParasDrag: 0.01
SpeedEps: 0.0001
WeightT: 1200.0                      # Further reduced weights
WeightSafeT: 250.0                   

# Weight vector - RESTORED to standard values for stable planning
ChiVec: [4.0e+5, 1.5e+4, 1.2e+4, 1.5e+5, 1.5e+5]  # RESTORED: Standard weights for stable planning
SmoothingEps: 0.03                   # Less smoothing for speed
IntegralIntervs: 12                  # Further reduced from 16
RelCostTol: 8.0e-6                   # Relaxed tolerance for faster convergence

# Yaw optimization - dual-core optimized
yaw_max_vel: 2.5                     # Reduced yaw velocity
yaw_rho_vis: 6000.0                  # Reduced visibility weight
yaw_time_fwd: 1.5                    # Shorter forward time

# Memory optimization
enable_memory_pool: true             # Enable memory pooling
memory_pool_size: 1024               # Small memory pool for dual-core
enable_cache_optimization: true      # Enable cache-friendly data structures
cache_line_size: 64                  # ARM cache line size

# CPU affinity settings
enable_cpu_affinity: true            # Enable CPU affinity
exploration_cpu_core: 0              # Bind exploration to core 0
planning_cpu_core: 1                 # Bind planning to core 1

# Real-time optimization
enable_real_time_scheduling: true    # Enable real-time scheduling
real_time_priority: 50               # Medium priority for stability
enable_lock_free_queues: true        # Use lock-free data structures

# Adaptive optimization (PERFORMANCE OPTIMIZED)
enable_adaptive_parameters: true     # Enable adaptive parameter tuning
performance_monitor_interval: 0.5    # REDUCED: More frequent monitoring
cpu_usage_threshold: 65.0            # REDUCED: Earlier optimization trigger
memory_usage_threshold: 60.0         # REDUCED: Earlier memory optimization 